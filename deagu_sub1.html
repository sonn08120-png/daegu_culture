<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/deagu_sub.css">
    <title>Document</title>
</head>

<body>
    <header>
        <div class="header_warp">
            <div class="nav_warp">
                <div class="nav">
                    <div class="nav_top">
                        <h1><a href="deagu.html"><img src="image/logo_color.png" alt="대구문화예술회관로고"></a></h1>
                        <div class="nav_my">
                            <a href=""><img src="image/login_02.png" alt="로그인">로그인</a>
                            <a href=""><img src="image/mypage_02.png" alt="마이페이지">마이페이지</a>
                        </div>
                    </div>
                    <div class="nav_bottom">
                        <ul>
                            <li><a href="">공연·전시</a></li>
                            <li><a href="">티켓예매</a></li>
                            <li><a href="">대관안내</a></li>
                            <li><a href="">문화예술교육</a></li>
                            <li><a href="">시립예술단</a></li>
                            <li><a href="">회관소개</a></li>
                            <li><a href="">열린광장</a></li>
                        </ul>
                        <div class="nav_bottom_img">
                            <a href=""><img src="image/Magnifier_02.png" alt="검색"></a>
                            <a href=""><img src="image/hambergur_02.png" alt="메뉴"></a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="header_img">
            <b>공연정보</b>
        </div>
        <div class="snb_warp">
            <div class="snb">
                <div class="snb_left">
                    <div class="snb_home"><a href="">
                            <img src="image/home.png">
                        </a></div>
                    <div class="snb_map"><a href="">
                            <p>공연·전시</p>
                        </a></div>
                    <div class="snb_map"><a href="">
                            <p>공연정보</p>
                        </a></div>
                    <div class="snb_map"><a href="">
                            <b>월간일정</b>
                        </a></div>
                </div>
                <div class="snb_right">
                    <div class="d-flex flex-column flex-lg-row mb-3">
                        <div>
                            <button onclick="shareInvitation()" class="text-underline ">
                                <img src="image/share.png">
                            </button>
                        </div>
                    </div>
                    <script>
                        function copyToClipboard(text) {
                            navigator.clipboard.writeText(text)
                                .then(() => {
                                    console.log('클립보드에 복사되었습니다.');
                                    alert('내용이 클립보드에 복사되었습니다.');
                                })
                                .catch((error) => {
                                    console.error('클립보드 복사 실패', error);
                                });
                        }

                        function shareInvitation() {
                            const textToShare = '공유할 내용'; // 공유할 내용
                            const urlToShare = 'https://example.com' + "동적할당"; // 공유할 URL

                            if (navigator.share) {
                                navigator.share({
                                    title: '공유할 제목',
                                    text: textToShare,
                                    url: urlToShare,
                                })
                                    .then(() => {
                                        console.log('공유 성공');
                                    })
                            } else {
                                // navigator.share가 지원되지 않는 경우 클립보드에 복사
                                copyToClipboard(`${textToShare} ${urlToShare}`);
                            }
                        }
                    </script>
                    <button onclick="return  printPage();"><img src="image/print.png"></button>
                    <script>
                        let initBodyHtml;

                        const printPage = () => {
                            window.print();
                        }

                        const beforePrint = () => {
                            initBodyHtml = document.body.innerHTML;
                            document.body.innerHTML = document.getElementById("print").innerHTML;
                        }

                        const afterPrint = () => {
                            document.body.innerHTML = initBodyHtml;
                        }

                        window.onbeforeprint = beforePrint;
                        window.onafterprint = afterPrint;
                    </script>
                </div>
            </div>
        </div>
    </header>
    <main>
        <div class="calendar-container">
            <!-- 월 타이틀 -->
            <div class="calendar-header">
                <button id="prevMonth"><img src="image/calender_arrow_left.png"></button>
                <h2 id="currentMonth">2025.10</h2>
                <button id="nextMonth"><img src="image/calender_arrow_right.png"></button>
            </div>

            <!-- 색상 범례 -->
            <div class="legend">
                <div class="legend-item"><span class="legend-dot dot-show"></span>예술단공연</div>
                <div class="legend-item"><span class="legend-dot dot-plan"></span>기획</div>
                <div class="legend-item"><span class="legend-dot dot-rent"></span>대관</div>
            </div>

            <!-- 달력 -->
            <table id="calendar"></table>
        </div>

        <script>
            const currentMonthEl = document.getElementById("currentMonth");
            const calendar = document.getElementById("calendar");
            let currentDate = new Date(2025, 9); // 10월 (0-indexed)

            // 샘플 일정 데이터
            const events = {
                "2025-10-02": [{ type: "show", title: "미술관 라이브" }],
                "2025-10-05": [{ type: "show", title: "대구시립고향악단 <체임버시리즈>" }],
                "2025-10-06": [{ type: "show", title: "이상 프로젝트 ‘이상과 카프카" }],
                "2025-10-07": [{ type: "show", title: "대구시립국악단 제 29회 청소년 협주곡의 밤" }],
                "2025-10-08": [{ type: "show", title: "시립합창단 <가을의 노래>" }],
                "2025-10-09": [{ type: "rent", title: "남진 전국 투어 콘서트" }],
                "2025-10-10": [{ type: "rent", title: "지브리&디즈니 영화음악 festa" }],
                "2025-10-12": [{ type: "plan", title: "금난새의 11시 데이트 (8월)" }],
                "2025-10-15": [{ type: "plan", title: "전통연회극 <광대>" }],
                "2025-10-15": [{ type: "plan", title: "음악극 <적로-이슬의 노래>" }],
                "2025-10-15": [{ type: "rent", title: "제80주년 광복절 경축 음악회" }],
                "2025-10-16": [{ type: "plan", title: "전통연회극 <광대>" }],
                "2025-10-17": [{ type: "rent", title: "대구시민과 함께하는 여름음악회" }],
                "2025-10-20": [{ type: "show", title: "대구국제금관∙타악페스티벌" }],
            };

            function renderCalendar(date) {
                const year = date.getFullYear();
                const month = date.getMonth();
                currentMonthEl.textContent = `${year}.${String(month + 1).padStart(2, "0")}`;

                const firstDay = new Date(year, month, 1).getDay();
                const lastDate = new Date(year, month + 1, 0).getDate();

                let html = `
        <thead>
          <tr>
            <th>일</th><th>월</th><th>화</th><th>수</th><th>목</th><th>금</th><th>토</th>
          </tr>
        </thead>
        <tbody><tr>
      `;

                for (let i = 0; i < firstDay; i++) html += "<td></td>";

                for (let i = 1; i <= lastDate; i++) {
                    const day = new Date(year, month, i).getDay();
                    const key = `${year}-${String(month + 1).padStart(2, "0")}-${String(i).padStart(2, "0")}`;
                    const dayEvents = events[key] || [];

                    html += `<td><div class="cell-content"><div class="date">${i}</div>`;

                    dayEvents.forEach((e) => {
                        html += `
            <div class="event ${e.type}">
              <span class="event-dot dot-${e.type}"></span>${e.title}
            </div>
          `;
                    });

                    html += `</div></td>`;

                    if (day === 6 && i !== lastDate) html += "</tr><tr>";
                }

                html += "</tr></tbody>";
                calendar.innerHTML = html;
            }

            document.getElementById("prevMonth").addEventListener("click", () => {
                currentDate.setMonth(currentDate.getMonth() - 1);
                renderCalendar(currentDate);
            });
            document.getElementById("nextMonth").addEventListener("click", () => {
                currentDate.setMonth(currentDate.getMonth() + 1);
                renderCalendar(currentDate);
            });

            renderCalendar(currentDate);
        </script>
    </main>
    <footer>
        <div class="footer_top">
            <ul>
                <li>공연관련<img src="image/small_arrow_top.png"></li>
                <li>전시관련<img src="image/small_arrow_top.png"></li>
                <li>교육관련<img src="image/small_arrow_top.png"></li>
                <li>유관기관<img src="image/small_arrow_top.png"></li>
                <li>협력기관<img src="image/small_arrow_top.png"></li>
            </ul>
        </div>
        <div class="footer_bottom">
            <img src="image/logo_ft.png">
            <div>
                <ul class="footer_01">
                    <li>개인정보처리방침</li>
                    <li>행정서비스현장</li>
                    <li>영상정보처리기기 운영</li>
                    <li>이메일집단수집거부</li>
                    <li>찾아오시는길</li>
                </ul>
                <ul class="footer_02">
                    <li>(42672) 대구광역시 달서구 공원순환로 201</li>
                    <li>대표전화 : 053-430-7600</li>
                    <li>팩스 : 053-430-7609</li>
                </ul>
                <p>본 홈페이지에 게시된 전자우편주소는 개인정보보호법 및 정보통신망법에 따라 무단 수집을 거부합니다. Copyright © Daegu Arts Center All Right
                    Reserved</p>
            </div>
        </div>
    </footer>
</body>

</html>